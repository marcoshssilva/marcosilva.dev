kind: pipeline
spec:
  stages:
  - type: ci
    spec:
      steps:
      - name: 'download_dependencies'
        type: run
        spec:
          container: node:20
          script: |-
            npm install --force
      - name: 'run_tests'
        type: run
        spec:
          container: node:20
          script: |-
            npm run lint
            npm run test
      - name: 'run_build'
        type: run
        spec:
          container: node:20
          script: |-
            npm run build
      - name: 'generate_docker_image'
        type: run
        spec:
          container: docker:dind
          script: |-
            sleep 5
            docker -H tcp://10.5.10.58:2375 build --tag marcosilva-dev-website:latest .
